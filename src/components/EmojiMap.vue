<template>
	<div>
		<canvas id="emojimap" @mousemove="onmousemove" @click="onmouseclick"></canvas>
		<span id="indicator" ref="indicator"></span>
		<span id="prediction" ref="prediction"></span>

		<div class="tooltips">
			<div class="tooltip select-emoji" v-show="!isStart">
				<button><span @click="selectEmoji">üòç</span> <span @click="selectEmoji">üíô</span> <span @click="selectEmoji">üåà</span> <span></span></button>
				<p>W√§hle dein Emoji aus und platziere es auf der Karte, um gemeinsam dem Corona Ausbreitungsfl√§che wegzunehmen.</p>
			</div>
		</div>
	</div>
</template>

<script>
export default {
	name: 'EmojiMap',
	props: ['isStart'],
	data () {
		const data = {
			emojis: ['üòÄ','üòÉ','üòÑ','üòÅ','üòÜ','üòÖ','ü§£','üòÇ','üôÇ','üôÉ','üòâ','üòä','üòá','ü•∞','üòç','ü§©','üòò','üòó','‚ò∫Ô∏è','üòö','üòô','ü•≤','üòã','üòõ','üòú','ü§™','üòù','ü§ë','ü§ó','ü§≠','ü§´','ü§î','ü§ê','ü§®','üòê','üòë','üò∂','üòè','üòí','üôÑ','üò¨','ü§•','üòå','üòî','üò™','ü§§','üò¥','üò∑','ü§í','ü§ï','ü§¢','ü§Æ','ü§ß','ü•µ','ü•∂','ü•¥','üòµ','ü§Ø','ü§†','ü•≥','ü•∏','üòé','ü§ì','üßê','üòï','üòü','üôÅ','‚òπÔ∏è','üòÆ','üòØ','üò≤','üò≥','ü•∫','üò¶','üòß','üò®','üò∞','üò•','üò¢','üò≠','üò±','üòñ','üò£','üòû','üòì','üò©','üò´','ü•±','üò§','üò°','üò†','ü§¨','üòà','üëø','üíÄ','‚ò†Ô∏è','üí©','ü§°','üëπ','üë∫','üëª','üëΩ','üëæ','ü§ñ','üò∫','üò∏','üòπ','üòª','üòº','üòΩ','üôÄ','üòø','üòæ','üôà','üôâ','üôä','üíã','üíå','üíò','üíù','üíñ','üíó','üíì','üíû','üíï','üíü','‚ù£Ô∏è','üíî','‚ù§Ô∏è','üß°','üíõ','üíö','üíô','üíú','ü§é','üñ§','ü§ç','üíØ','üí¢','üí•','üí´','üí¶','üí®','üï≥Ô∏è','üí£','üí¨','üëÅÔ∏è‚Äçüó®Ô∏è','üó®Ô∏è','üóØÔ∏è','üí≠','üí§','üëã','ü§ö','üñêÔ∏è','‚úã','üññ','üëå','ü§å','ü§è','‚úåÔ∏è','ü§û','ü§ü','ü§ò','ü§ô','üëà','üëâ','üëÜ','üñï','üëá','‚òùÔ∏è','üëç','üëé','‚úä','üëä','ü§õ','ü§ú','üëè','üôå','üëê','ü§≤','ü§ù','üôè','‚úçÔ∏è','üíÖ','ü§≥','üí™','ü¶æ','ü¶ø','ü¶µ','ü¶∂','üëÇ','ü¶ª','üëÉ','üß†','ü´Ä','ü´Å','ü¶∑','ü¶¥','üëÄ','üëÅÔ∏è','üëÖ','üëÑ','üë∂','üßí','üë¶','üëß','üßë','üë±','üë®','üßî','üë®‚Äçü¶∞','üë®‚Äçü¶±','üë®‚Äçü¶≥','üë®‚Äçü¶≤','üë©','üë©‚Äçü¶∞','üßë‚Äçü¶∞','üë©‚Äçü¶±','üßë‚Äçü¶±','üë©‚Äçü¶≥','üßë‚Äçü¶≥','üë©‚Äçü¶≤','üßë‚Äçü¶≤','üë±‚Äç‚ôÄÔ∏è','üë±‚Äç‚ôÇÔ∏è','üßì','üë¥','üëµ','üôç','üôç‚Äç‚ôÇÔ∏è','üôç‚Äç‚ôÄÔ∏è','üôé','üôé‚Äç‚ôÇÔ∏è','üôé‚Äç‚ôÄÔ∏è','üôÖ','üôÖ‚Äç‚ôÇÔ∏è','üôÖ‚Äç‚ôÄÔ∏è','üôÜ','üôÜ‚Äç‚ôÇÔ∏è','üôÜ‚Äç‚ôÄÔ∏è','üíÅ','üíÅ‚Äç‚ôÇÔ∏è','üíÅ‚Äç‚ôÄÔ∏è','üôã','üôã‚Äç‚ôÇÔ∏è','üôã‚Äç‚ôÄÔ∏è','üßè','üßè‚Äç‚ôÇÔ∏è','üßè‚Äç‚ôÄÔ∏è','üôá','üôá‚Äç‚ôÇÔ∏è','üôá‚Äç‚ôÄÔ∏è','ü§¶','ü§¶‚Äç‚ôÇÔ∏è','ü§¶‚Äç‚ôÄÔ∏è','ü§∑','ü§∑‚Äç‚ôÇÔ∏è','ü§∑‚Äç‚ôÄÔ∏è','üßë‚Äç‚öïÔ∏è','üë®‚Äç‚öïÔ∏è','üë©‚Äç‚öïÔ∏è','üßë‚Äçüéì','üë®‚Äçüéì','üë©‚Äçüéì','üßë‚Äçüè´','üë®‚Äçüè´','üë©‚Äçüè´','üßë‚Äç‚öñÔ∏è','üë®‚Äç‚öñÔ∏è','üë©‚Äç‚öñÔ∏è','üßë‚Äçüåæ','üë®‚Äçüåæ','üë©‚Äçüåæ','üßë‚Äçüç≥','üë®‚Äçüç≥','üë©‚Äçüç≥','üßë‚Äçüîß','üë®‚Äçüîß','üë©‚Äçüîß','üßë‚Äçüè≠','üë®‚Äçüè≠','üë©‚Äçüè≠','üßë‚Äçüíº','üë®‚Äçüíº','üë©‚Äçüíº','üßë‚Äçüî¨','üë®‚Äçüî¨','üë©‚Äçüî¨','üßë‚Äçüíª','üë®‚Äçüíª','üë©‚Äçüíª','üßë‚Äçüé§','üë®‚Äçüé§','üë©‚Äçüé§','üßë‚Äçüé®','üë®‚Äçüé®','üë©‚Äçüé®','üßë‚Äç‚úàÔ∏è','üë®‚Äç‚úàÔ∏è','üë©‚Äç‚úàÔ∏è','üßë‚ÄçüöÄ','üë®‚ÄçüöÄ','üë©‚ÄçüöÄ','üßë‚Äçüöí','üë®‚Äçüöí','üë©‚Äçüöí','üëÆ','üëÆ‚Äç‚ôÇÔ∏è','üëÆ‚Äç‚ôÄÔ∏è','üïµÔ∏è','üïµÔ∏è‚Äç‚ôÇÔ∏è','üïµÔ∏è‚Äç‚ôÄÔ∏è','üíÇ','üíÇ‚Äç‚ôÇÔ∏è','üíÇ‚Äç‚ôÄÔ∏è','ü•∑','üë∑','üë∑‚Äç‚ôÇÔ∏è','üë∑‚Äç‚ôÄÔ∏è','ü§¥','üë∏','üë≥','üë≥‚Äç‚ôÇÔ∏è','üë≥‚Äç‚ôÄÔ∏è','üë≤','üßï','ü§µ','ü§µ‚Äç‚ôÇÔ∏è','ü§µ‚Äç‚ôÄÔ∏è','üë∞','üë∞‚Äç‚ôÇÔ∏è','üë∞‚Äç‚ôÄÔ∏è','ü§∞','ü§±','üë©‚Äçüçº','üë®‚Äçüçº','üßë‚Äçüçº','üëº','üéÖ','ü§∂','üßë‚ÄçüéÑ','ü¶∏','ü¶∏‚Äç‚ôÇÔ∏è','ü¶∏‚Äç‚ôÄÔ∏è','ü¶π','ü¶π‚Äç‚ôÇÔ∏è','ü¶π‚Äç‚ôÄÔ∏è','üßô','üßô‚Äç‚ôÇÔ∏è','üßô‚Äç‚ôÄÔ∏è','üßö','üßö‚Äç‚ôÇÔ∏è','üßö‚Äç‚ôÄÔ∏è','üßõ','üßõ‚Äç‚ôÇÔ∏è','üßõ‚Äç‚ôÄÔ∏è','üßú','üßú‚Äç‚ôÇÔ∏è','üßú‚Äç‚ôÄÔ∏è','üßù','üßù‚Äç‚ôÇÔ∏è','üßù‚Äç‚ôÄÔ∏è','üßû','üßû‚Äç‚ôÇÔ∏è','üßû‚Äç‚ôÄÔ∏è','üßü','üßü‚Äç‚ôÇÔ∏è','üßü‚Äç‚ôÄÔ∏è','üíÜ','üíÜ‚Äç‚ôÇÔ∏è','üíÜ‚Äç‚ôÄÔ∏è','üíá','üíá‚Äç‚ôÇÔ∏è','üíá‚Äç‚ôÄÔ∏è','üö∂','üö∂‚Äç‚ôÇÔ∏è','üö∂‚Äç‚ôÄÔ∏è','üßç','üßç‚Äç‚ôÇÔ∏è','üßç‚Äç‚ôÄÔ∏è','üßé','üßé‚Äç‚ôÇÔ∏è','üßé‚Äç‚ôÄÔ∏è','üßë‚Äçü¶Ø','üë®‚Äçü¶Ø','üë©‚Äçü¶Ø','üßë‚Äçü¶º','üë®‚Äçü¶º','üë©‚Äçü¶º','üßë‚Äçü¶Ω','üë®‚Äçü¶Ω','üë©‚Äçü¶Ω','üèÉ','üèÉ‚Äç‚ôÇÔ∏è','üèÉ‚Äç‚ôÄÔ∏è','üíÉ','üï∫','üï¥Ô∏è','üëØ','üëØ‚Äç‚ôÇÔ∏è','üëØ‚Äç‚ôÄÔ∏è','üßñ','üßñ‚Äç‚ôÇÔ∏è','üßñ‚Äç‚ôÄÔ∏è','üßó','üßó‚Äç‚ôÇÔ∏è','üßó‚Äç‚ôÄÔ∏è','ü§∫','üèá','‚õ∑Ô∏è','üèÇ','üèåÔ∏è','üèåÔ∏è‚Äç‚ôÇÔ∏è','üèåÔ∏è‚Äç‚ôÄÔ∏è','üèÑ','üèÑ‚Äç‚ôÇÔ∏è','üèÑ‚Äç‚ôÄÔ∏è','üö£','üö£‚Äç‚ôÇÔ∏è','üö£‚Äç‚ôÄÔ∏è','üèä','üèä‚Äç‚ôÇÔ∏è','üèä‚Äç‚ôÄÔ∏è','‚õπÔ∏è','‚õπÔ∏è‚Äç‚ôÇÔ∏è','‚õπÔ∏è‚Äç‚ôÄÔ∏è','üèãÔ∏è','üèãÔ∏è‚Äç‚ôÇÔ∏è','üèãÔ∏è‚Äç‚ôÄÔ∏è','üö¥','üö¥‚Äç‚ôÇÔ∏è','üö¥‚Äç‚ôÄÔ∏è','üöµ','üöµ‚Äç‚ôÇÔ∏è','üöµ‚Äç‚ôÄÔ∏è','ü§∏','ü§∏‚Äç‚ôÇÔ∏è','ü§∏‚Äç‚ôÄÔ∏è','ü§º','ü§º‚Äç‚ôÇÔ∏è','ü§º‚Äç‚ôÄÔ∏è','ü§Ω','ü§Ω‚Äç‚ôÇÔ∏è','ü§Ω‚Äç‚ôÄÔ∏è','ü§æ','ü§æ‚Äç‚ôÇÔ∏è','ü§æ‚Äç‚ôÄÔ∏è','ü§π','ü§π‚Äç‚ôÇÔ∏è','ü§π‚Äç‚ôÄÔ∏è','üßò','üßò‚Äç‚ôÇÔ∏è','üßò‚Äç‚ôÄÔ∏è','üõÄ','üõå','üßë‚Äçü§ù‚Äçüßë','üë≠','üë´','üë¨','üíè','üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®','üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®','üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë©','üíë','üë©‚Äç‚ù§Ô∏è‚Äçüë®','üë®‚Äç‚ù§Ô∏è‚Äçüë®','üë©‚Äç‚ù§Ô∏è‚Äçüë©','üë™','üë®‚Äçüë©‚Äçüë¶','üë®‚Äçüë©‚Äçüëß','üë®‚Äçüë©‚Äçüëß‚Äçüë¶','üë®‚Äçüë©‚Äçüë¶‚Äçüë¶','üë®‚Äçüë©‚Äçüëß‚Äçüëß','üë®‚Äçüë®‚Äçüë¶','üë®‚Äçüë®‚Äçüëß','üë®‚Äçüë®‚Äçüëß‚Äçüë¶','üë®‚Äçüë®‚Äçüë¶‚Äçüë¶','üë®‚Äçüë®‚Äçüëß‚Äçüëß','üë©‚Äçüë©‚Äçüë¶','üë©‚Äçüë©‚Äçüëß','üë©‚Äçüë©‚Äçüëß‚Äçüë¶','üë©‚Äçüë©‚Äçüë¶‚Äçüë¶','üë©‚Äçüë©‚Äçüëß‚Äçüëß','üë®‚Äçüë¶','üë®‚Äçüë¶‚Äçüë¶','üë®‚Äçüëß','üë®‚Äçüëß‚Äçüë¶','üë®‚Äçüëß‚Äçüëß','üë©‚Äçüë¶','üë©‚Äçüë¶‚Äçüë¶','üë©‚Äçüëß','üë©‚Äçüëß‚Äçüë¶','üë©‚Äçüëß‚Äçüëß','üó£Ô∏è','üë§','üë•','ü´Ç','üë£','üêµ','üêí','ü¶ç','ü¶ß','üê∂','üêï','ü¶Æ','üêï‚Äçü¶∫','üê©','üê∫','ü¶ä','ü¶ù','üê±','üêà','üêà‚Äç‚¨õ','ü¶Å','üêØ','üêÖ','üêÜ','üê¥','üêé','ü¶Ñ','ü¶ì','ü¶å','ü¶¨','üêÆ','üêÇ','üêÉ','üêÑ','üê∑','üêñ','üêó','üêΩ','üêè','üêë','üêê','üê™','üê´','ü¶ô','ü¶í','üêò','ü¶£','ü¶è','ü¶õ','üê≠','üêÅ','üêÄ','üêπ','üê∞','üêá','üêøÔ∏è','ü¶´','ü¶î','ü¶á','üêª','üêª‚Äç‚ùÑÔ∏è','üê®','üêº','ü¶•','ü¶¶','ü¶®','ü¶ò','ü¶°','üêæ','ü¶É','üêî','üêì','üê£','üê§','üê•','üê¶','üêß','üïäÔ∏è','ü¶Ö','ü¶Ü','ü¶¢','ü¶â','ü¶§','ü™∂','ü¶©','ü¶ö','ü¶ú','üê∏','üêä','üê¢','ü¶é','üêç','üê≤','üêâ','ü¶ï','ü¶ñ','üê≥','üêã','üê¨','ü¶≠','üêü','üê†','üê°','ü¶à','üêô','üêö','üêå','ü¶ã','üêõ','üêú','üêù','ü™≤','üêû','ü¶ó','ü™≥','üï∑Ô∏è','üï∏Ô∏è','ü¶Ç','ü¶ü','ü™∞','ü™±','ü¶†','üíê','üå∏','üíÆ','üèµÔ∏è','üåπ','ü•Ä','üå∫','üåª','üåº','üå∑','üå±','ü™¥','üå≤','üå≥','üå¥','üåµ','üåæ','üåø','‚òòÔ∏è','üçÄ','üçÅ','üçÇ','üçÉ','üçá','üçà','üçâ','üçä','üçã','üçå','üçç','ü•≠','üçé','üçè','üçê','üçë','üçí','üçì','ü´ê','ü•ù','üçÖ','ü´í','ü••','ü•ë','üçÜ','ü•î','ü•ï','üåΩ','üå∂Ô∏è','ü´ë','ü•í','ü•¨','ü•¶','üßÑ','üßÖ','üçÑ','ü•ú','üå∞','üçû','ü•ê','ü•ñ','ü´ì','ü•®','ü•Ø','ü•û','üßá','üßÄ','üçñ','üçó','ü•©','ü•ì','üçî','üçü','üçï','üå≠','ü•™','üåÆ','üåØ','ü´î','ü•ô','üßÜ','ü•ö','üç≥','ü•ò','üç≤','ü´ï','ü•£','ü•ó','üçø','üßà','üßÇ','ü•´','üç±','üçò','üçô','üçö','üçõ','üçú','üçù','üç†','üç¢','üç£','üç§','üç•','ü•Æ','üç°','ü•ü','ü•†','ü•°','ü¶Ä','ü¶û','ü¶ê','ü¶ë','ü¶™','üç¶','üçß','üç®','üç©','üç™','üéÇ','üç∞','üßÅ','ü•ß','üç´','üç¨','üç≠','üçÆ','üçØ','üçº','ü•õ','‚òï','ü´ñ','üçµ','üç∂','üçæ','üç∑','üç∏','üçπ','üç∫','üçª','ü•Ç','ü•É','ü•§','üßã','üßÉ','üßâ','üßä','ü•¢','üçΩÔ∏è','üç¥','ü•Ñ','üî™','üè∫','üåç','üåé','üåè','üåê','üó∫Ô∏è','üóæ','üß≠','üèîÔ∏è','‚õ∞Ô∏è','üåã','üóª','üèïÔ∏è','üèñÔ∏è','üèúÔ∏è','üèùÔ∏è','üèûÔ∏è','üèüÔ∏è','üèõÔ∏è','üèóÔ∏è','üß±','ü™®','ü™µ','üõñ','üèòÔ∏è','üèöÔ∏è','üè†','üè°','üè¢','üè£','üè§','üè•','üè¶','üè®','üè©','üè™','üè´','üè¨','üè≠','üèØ','üè∞','üíí','üóº','üóΩ','‚õ™','üïå','üõï','üïç','‚õ©Ô∏è','üïã','‚õ≤','‚õ∫','üåÅ','üåÉ','üèôÔ∏è','üåÑ','üåÖ','üåÜ','üåá','üåâ','‚ô®Ô∏è','üé†','üé°','üé¢','üíà','üé™','üöÇ','üöÉ','üöÑ','üöÖ','üöÜ','üöá','üöà','üöâ','üöä','üöù','üöû','üöã','üöå','üöç','üöé','üöê','üöë','üöí','üöì','üöî','üöï','üöñ','üöó','üöò','üöô','üõª','üöö','üöõ','üöú','üèéÔ∏è','üèçÔ∏è','üõµ','ü¶Ω','ü¶º','üõ∫','üö≤','üõ¥','üõπ','üõº','üöè','üõ£Ô∏è','üõ§Ô∏è','üõ¢Ô∏è','‚õΩ','üö®','üö•','üö¶','üõë','üöß','‚öì','‚õµ','üõ∂','üö§','üõ≥Ô∏è','‚õ¥Ô∏è','üõ•Ô∏è','üö¢','‚úàÔ∏è','üõ©Ô∏è','üõ´','üõ¨','ü™Ç','üí∫','üöÅ','üöü','üö†','üö°','üõ∞Ô∏è','üöÄ','üõ∏','üõéÔ∏è','üß≥','‚åõ','‚è≥','‚åö','‚è∞','‚è±Ô∏è','‚è≤Ô∏è','üï∞Ô∏è','üïõ','üïß','üïê','üïú','üïë','üïù','üïí','üïû','üïì','üïü','üïî','üï†','üïï','üï°','üïñ','üï¢','üïó','üï£','üïò','üï§','üïô','üï•','üïö','üï¶','üåë','üåí','üåì','üåî','üåï','üåñ','üåó','üåò','üåô','üåö','üåõ','üåú','üå°Ô∏è','‚òÄÔ∏è','üåù','üåû','ü™ê','‚≠ê','üåü','üå†','üåå','‚òÅÔ∏è','‚õÖ','‚õàÔ∏è','üå§Ô∏è','üå•Ô∏è','üå¶Ô∏è','üåßÔ∏è','üå®Ô∏è','üå©Ô∏è','üå™Ô∏è','üå´Ô∏è','üå¨Ô∏è','üåÄ','üåà','üåÇ','‚òÇÔ∏è','‚òî','‚õ±Ô∏è','‚ö°','‚ùÑÔ∏è','‚òÉÔ∏è','‚õÑ','‚òÑÔ∏è','üî•','üíß','üåä','üéÉ','üéÑ','üéÜ','üéá','üß®','‚ú®','üéà','üéâ','üéä','üéã','üéç','üéé','üéè','üéê','üéë','üßß','üéÄ','üéÅ','üéóÔ∏è','üéüÔ∏è','üé´','üéñÔ∏è','üèÜ','üèÖ','ü•á','ü•à','ü•â','‚öΩ','‚öæ','ü•é','üèÄ','üèê','üèà','üèâ','üéæ','ü•è','üé≥','üèè','üèë','üèí','ü•ç','üèì','üè∏','ü•ä','ü•ã','ü•Ö','‚õ≥','‚õ∏Ô∏è','üé£','ü§ø','üéΩ','üéø','üõ∑','ü•å','üéØ','ü™Ä','ü™Å','üé±','üîÆ','ü™Ñ','üßø','üéÆ','üïπÔ∏è','üé∞','üé≤','üß©','üß∏','ü™Ö','ü™Ü','‚ô†Ô∏è','‚ô•Ô∏è','‚ô¶Ô∏è','‚ô£Ô∏è','‚ôüÔ∏è','üÉè','üÄÑ','üé¥','üé≠','üñºÔ∏è','üé®','üßµ','ü™°','üß∂','ü™¢','üëì','üï∂Ô∏è','ü•Ω','ü•º','ü¶∫','üëî','üëï','üëñ','üß£','üß§','üß•','üß¶','üëó','üëò','ü•ª','ü©±','ü©≤','ü©≥','üëô','üëö','üëõ','üëú','üëù','üõçÔ∏è','üéí','ü©¥','üëû','üëü','ü•æ','ü•ø','üë†','üë°','ü©∞','üë¢','üëë','üëí','üé©','üéì','üß¢','ü™ñ','‚õëÔ∏è','üìø','üíÑ','üíç','üíé','üîá','üîà','üîâ','üîä','üì¢','üì£','üìØ','üîî','üîï','üéº','üéµ','üé∂','üéôÔ∏è','üéöÔ∏è','üéõÔ∏è','üé§','üéß','üìª','üé∑','ü™ó','üé∏','üéπ','üé∫','üéª','ü™ï','ü•Å','ü™ò','üì±','üì≤','‚òéÔ∏è','üìû','üìü','üì†','üîã','üîå','üíª','üñ•Ô∏è','üñ®Ô∏è','‚å®Ô∏è','üñ±Ô∏è','üñ≤Ô∏è','üíΩ','üíæ','üíø','üìÄ','üßÆ','üé•','üéûÔ∏è','üìΩÔ∏è','üé¨','üì∫','üì∑','üì∏','üìπ','üìº','üîç','üîé','üïØÔ∏è','üí°','üî¶','üèÆ','ü™î','üìî','üìï','üìñ','üìó','üìò','üìô','üìö','üìì','üìí','üìÉ','üìú','üìÑ','üì∞','üóûÔ∏è','üìë','üîñ','üè∑Ô∏è','üí∞','ü™ô','üí¥','üíµ','üí∂','üí∑','üí∏','üí≥','üßæ','üíπ','‚úâÔ∏è','üìß','üì®','üì©','üì§','üì•','üì¶','üì´','üì™','üì¨','üì≠','üìÆ','üó≥Ô∏è','‚úèÔ∏è','‚úíÔ∏è','üñãÔ∏è','üñäÔ∏è','üñåÔ∏è','üñçÔ∏è','üìù','üíº','üìÅ','üìÇ','üóÇÔ∏è','üìÖ','üìÜ','üóíÔ∏è','üóìÔ∏è','üìá','üìà','üìâ','üìä','üìã','üìå','üìç','üìé','üñáÔ∏è','üìè','üìê','‚úÇÔ∏è','üóÉÔ∏è','üóÑÔ∏è','üóëÔ∏è','üîí','üîì','üîè','üîê','üîë','üóùÔ∏è','üî®','ü™ì','‚õèÔ∏è','‚öíÔ∏è','üõ†Ô∏è','üó°Ô∏è','‚öîÔ∏è','üî´','ü™É','üèπ','üõ°Ô∏è','ü™ö','üîß','ü™õ','üî©','‚öôÔ∏è','üóúÔ∏è','‚öñÔ∏è','ü¶Ø','üîó','‚õìÔ∏è','ü™ù','üß∞','üß≤','ü™ú','‚öóÔ∏è','üß™','üß´','üß¨','üî¨','üî≠','üì°','üíâ','ü©∏','üíä','ü©π','ü©∫','üö™','üõó','ü™û','ü™ü','üõèÔ∏è','üõãÔ∏è','ü™ë','üöΩ','ü™†','üöø','üõÅ','ü™§','ü™í','üß¥','üß∑','üßπ','üß∫','üßª','ü™£','üßº','ü™•','üßΩ','üßØ','üõí','üö¨','‚ö∞Ô∏è','ü™¶','‚ö±Ô∏è','üóø','ü™ß','üèß','üöÆ','üö∞','‚ôø','üöπ','üö∫','üöª','üöº','üöæ','üõÇ','üõÉ','üõÑ','üõÖ','‚ö†Ô∏è','üö∏','‚õî','üö´','üö≥','üö≠','üöØ','üö±','üö∑','üìµ','üîû','‚ò¢Ô∏è','‚ò£Ô∏è','‚¨ÜÔ∏è','‚ÜóÔ∏è','‚û°Ô∏è','‚ÜòÔ∏è','‚¨áÔ∏è','‚ÜôÔ∏è','‚¨ÖÔ∏è','‚ÜñÔ∏è','‚ÜïÔ∏è','‚ÜîÔ∏è','‚Ü©Ô∏è','‚Ü™Ô∏è','‚§¥Ô∏è','‚§µÔ∏è','üîÉ','üîÑ','üîô','üîö','üîõ','üîú','üîù','üõê','‚öõÔ∏è','üïâÔ∏è','‚ú°Ô∏è','‚ò∏Ô∏è','‚òØÔ∏è','‚úùÔ∏è','‚ò¶Ô∏è','‚ò™Ô∏è','‚òÆÔ∏è','üïé','üîØ','‚ôà','‚ôâ','‚ôä','‚ôã','‚ôå','‚ôç','‚ôé','‚ôè','‚ôê','‚ôë','‚ôí','‚ôì','‚õé','üîÄ','üîÅ','üîÇ','‚ñ∂Ô∏è','‚è©','‚è≠Ô∏è','‚èØÔ∏è','‚óÄÔ∏è','‚è™','‚èÆÔ∏è','üîº','‚è´','üîΩ','‚è¨','‚è∏Ô∏è','‚èπÔ∏è','‚è∫Ô∏è','‚èèÔ∏è','üé¶','üîÖ','üîÜ','üì∂','üì≥','üì¥','‚ôÄÔ∏è','‚ôÇÔ∏è','‚ößÔ∏è','‚úñÔ∏è','‚ûï','‚ûñ','‚ûó','‚ôæÔ∏è','‚ÄºÔ∏è','‚ÅâÔ∏è','‚ùì','‚ùî','‚ùï','‚ùó','„Ä∞Ô∏è','üí±','üí≤','‚öïÔ∏è','‚ôªÔ∏è','‚öúÔ∏è','üî±','üìõ','üî∞','‚≠ï','‚úÖ','‚òëÔ∏è','‚úîÔ∏è','‚ùå','‚ùé','‚û∞','‚ûø','„ÄΩÔ∏è','‚ú≥Ô∏è','‚ú¥Ô∏è','‚ùáÔ∏è','¬©Ô∏è','¬ÆÔ∏è','‚Ñ¢Ô∏è','#Ô∏è‚É£','*Ô∏è‚É£','0Ô∏è‚É£','1Ô∏è‚É£','2Ô∏è‚É£','3Ô∏è‚É£','4Ô∏è‚É£','5Ô∏è‚É£','6Ô∏è‚É£','7Ô∏è‚É£','8Ô∏è‚É£','9Ô∏è‚É£','üîü','üî†','üî°','üî¢','üî£','üî§','üÖ∞Ô∏è','üÜé','üÖ±Ô∏è','üÜë','üÜí','üÜì','‚ÑπÔ∏è','üÜî','‚ìÇÔ∏è','üÜï','üÜñ','üÖæÔ∏è','üÜó','üÖøÔ∏è','üÜò','üÜô','üÜö','üàÅ','üàÇÔ∏è','üà∑Ô∏è','üà∂','üàØ','üâê','üàπ','üàö','üà≤','üâë','üà∏','üà¥','üà≥','„äóÔ∏è','„äôÔ∏è','üà∫','üàµ','üî¥','üü†','üü°','üü¢','üîµ','üü£','üü§','‚ö´','‚ö™','üü•','üüß','üü®','üü©','üü¶','üü™','üü´','‚¨õ','‚¨ú','‚óºÔ∏è','‚óªÔ∏è','‚óæ','‚óΩ','‚ñ™Ô∏è','‚ñ´Ô∏è','üî∂','üî∑','üî∏','üîπ','üî∫','üîª','üí†','üîò','üî≥','üî≤','üèÅ','üö©','üéå','üè¥','üè≥Ô∏è','üè≥Ô∏è‚Äçüåà','üè≥Ô∏è‚Äç‚ößÔ∏è','üè¥‚Äç‚ò†Ô∏è','üá¶üá®','üá¶üá©','üá¶üá™','üá¶üá´','üá¶üá¨','üá¶üáÆ','üá¶üá±','üá¶üá≤','üá¶üá¥','üá¶üá∂','üá¶üá∑','üá¶üá∏','üá¶üáπ','üá¶üá∫','üá¶üáº','üá¶üáΩ','üá¶üáø','üáßüá¶','üáßüáß','üáßüá©','üáßüá™','üáßüá´','üáßüá¨','üáßüá≠','üáßüáÆ','üáßüáØ','üáßüá±','üáßüá≤','üáßüá≥','üáßüá¥','üáßüá∂','üáßüá∑','üáßüá∏','üáßüáπ','üáßüáª','üáßüáº','üáßüáæ','üáßüáø','üá®üá¶','üá®üá®','üá®üá©','üá®üá´','üá®üá¨','üá®üá≠','üá®üáÆ','üá®üá∞','üá®üá±','üá®üá≤','üá®üá≥','üá®üá¥','üá®üáµ','üá®üá∑','üá®üá∫','üá®üáª','üá®üáº','üá®üáΩ','üá®üáæ','üá®üáø','üá©üá™','üá©üá¨','üá©üáØ','üá©üá∞','üá©üá≤','üá©üá¥','üá©üáø','üá™üá¶','üá™üá®','üá™üá™','üá™üá¨','üá™üá≠','üá™üá∑','üá™üá∏','üá™üáπ','üá™üá∫','üá´üáÆ','üá´üáØ','üá´üá∞','üá´üá≤','üá´üá¥','üá´üá∑','üá¨üá¶','üá¨üáß','üá¨üá©','üá¨üá™','üá¨üá´','üá¨üá¨','üá¨üá≠','üá¨üáÆ','üá¨üá±','üá¨üá≤','üá¨üá≥','üá¨üáµ','üá¨üá∂','üá¨üá∑','üá¨üá∏','üá¨üáπ','üá¨üá∫','üá¨üáº','üá¨üáæ','üá≠üá∞','üá≠üá≤','üá≠üá≥','üá≠üá∑','üá≠üáπ','üá≠üá∫','üáÆüá®','üáÆüá©','üáÆüá™','üáÆüá±','üáÆüá≤','üáÆüá≥','üáÆüá¥','üáÆüá∂','üáÆüá∑','üáÆüá∏','üáÆüáπ','üáØüá™','üáØüá≤','üáØüá¥','üáØüáµ','üá∞üá™','üá∞üá¨','üá∞üá≠','üá∞üáÆ','üá∞üá≤','üá∞üá≥','üá∞üáµ','üá∞üá∑','üá∞üáº','üá∞üáæ','üá∞üáø','üá±üá¶','üá±üáß','üá±üá®','üá±üáÆ','üá±üá∞','üá±üá∑','üá±üá∏','üá±üáπ','üá±üá∫','üá±üáª','üá±üáæ','üá≤üá¶','üá≤üá®','üá≤üá©','üá≤üá™','üá≤üá´','üá≤üá¨','üá≤üá≠','üá≤üá∞','üá≤üá±','üá≤üá≤','üá≤üá≥','üá≤üá¥','üá≤üáµ','üá≤üá∂','üá≤üá∑','üá≤üá∏','üá≤üáπ','üá≤üá∫','üá≤üáª','üá≤üáº','üá≤üáΩ','üá≤üáæ','üá≤üáø','üá≥üá¶','üá≥üá®','üá≥üá™','üá≥üá´','üá≥üá¨','üá≥üáÆ','üá≥üá±','üá≥üá¥','üá≥üáµ','üá≥üá∑','üá≥üá∫','üá≥üáø','üá¥üá≤','üáµüá¶','üáµüá™','üáµüá´','üáµüá¨','üáµüá≠','üáµüá∞','üáµüá±','üáµüá≤','üáµüá≥','üáµüá∑','üáµüá∏','üáµüáπ','üáµüáº','üáµüáæ','üá∂üá¶','üá∑üá™','üá∑üá¥','üá∑üá∏','üá∑üá∫','üá∑üáº','üá∏üá¶','üá∏üáß','üá∏üá®','üá∏üá©','üá∏üá™','üá∏üá¨','üá∏üá≠','üá∏üáÆ','üá∏üáØ','üá∏üá∞','üá∏üá±','üá∏üá≤','üá∏üá≥','üá∏üá¥','üá∏üá∑','üá∏üá∏','üá∏üáπ','üá∏üáª','üá∏üáΩ','üá∏üáæ','üá∏üáø','üáπüá¶','üáπüá®','üáπüá©','üáπüá´','üáπüá¨','üáπüá≠','üáπüáØ','üáπüá∞','üáπüá±','üáπüá≤','üáπüá≥','üáπüá¥','üáπüá∑','üáπüáπ','üáπüáª','üáπüáº','üáπüáø','üá∫üá¶','üá∫üá¨','üá∫üá≤','üá∫üá≥','üá∫üá∏','üá∫üáæ','üá∫üáø','üáªüá¶','üáªüá®','üáªüá™','üáªüá¨','üáªüáÆ','üáªüá≥','üáªüá∫','üáºüá´','üáºüá∏','üáΩüá∞','üáæüá™','üáæüáπ','üáøüá¶','üáøüá≤','üáøüáº','üè¥','üè¥','üè¥'],
			infectedEmoji: 'üü•',
			selectedEmoji: null,
			BLOCKS: [],
			STOREDBLOCKS: this.$store.state.BLOCKS,
			STOREDEMOJIS: [],
			infections: 18610,
			tileSquare: 100,
			tileSize: 8,
			gutter: 3,
			// Zoom relevant
			mouseX: -1,
			mouseY: -1,
			dragPosition: null,
			mouseIsMoving: false,
			scaleFactor: 1.1,
		}

		return data
	},
	mounted () {
		const SVG = document.createElementNS("http://www.w3.org/2000/svg",'svg')
		
		this.$canvas = document.getElementById('emojimap')
		this.$ctx = this.$canvas.getContext('2d')

		this.SVGPoint = SVG.createSVGPoint()
		this.SVGMatrix = SVG.createSVGMatrix();

		this.setupZoom()
		this.setup()

		this.$nextTick(function() {
			window.addEventListener('resize', this.setup)
			this.$canvas.addEventListener('DOMMouseScroll', this.onmousescroll, false)
			this.$canvas.addEventListener('mousewheel', this.onmousescroll, false)
			this.$canvas.addEventListener('mousedown', this.onmousedown, false)
			this.$canvas.addEventListener('mousemove', this.onmousemove, false)
			this.$canvas.addEventListener('mouseup', this.onmouseup, false)
		})
		
		// Perfomance wise add offscreen canvas
		/*
		const offscreen = this.$canvas.transferControlToOffscreen()
		const worker = new Worker('service-worker.js');
		worker.postMessage({ canvas: offscreen }, [offscreen]);
		*/
	},
	methods: {
		onmousemove (ev) {
			this.mouseX = ev.offsetX || (ev.pageX - this.$canvas.offsetLeft)
			this.mouseY = ev.offsetY || (ev.pageY - this.$canvas.offsetTop)

			this.mouseIsMoving = true
			if (this.dragPosition){
				const SVGPoint = this.$ctx.transformedPoint(this.mouseX, this.mouseY)
				this.$ctx.translate(SVGPoint.x - this.dragPosition.x, SVGPoint.y - this.dragPosition.y)
				this.draw()
			} else {
				this.predictPosition(this.mouseY, this.mouseX)

				this.$refs.indicator.style.top = `${this.mouseY}px`
				this.$refs.indicator.style.left = `${this.mouseX}px`
			}
		},
		onmouseclick (ev) {
			if (this.selectedEmoji) {
				this.mouseX = ev.offsetX || (ev.pageX - this.$canvas.offsetLeft)
				this.mouseY = ev.offsetY || (ev.pageY - this.$canvas.offsetTop)

				let x = Math.round(this.mouseX / this.tileSize)
				let y = Math.round(this.mouseY / this.tileSize)

				this.addEmoji(x, y)
			}
		},
		onmousescroll (ev) {
			var delta = ev.wheelDelta ? ev.wheelDelta / 40 : ev.detail ? -ev.detail : 0

			if (delta) this.zoom(delta)

			return ev.preventDefault() && false
		},
		onmousedown (ev) {
			document.body.style.mozUserSelect = document.body.style.webkitUserSelect = document.body.style.userSelect = 'none';

			this.mouseX = ev.offsetX || (ev.pageX - this.$canvas.offsetLeft)
			this.mouseY = ev.offsetY || (ev.pageY - this.$canvas.offsetTop)

			this.dragPosition = this.$ctx.transformedPoint(this.mouseX, this.mouseY)
			this.mouseIsMoving = false
		},
		onmouseup (ev) {
			this.dragPosition = null
		},
		setupZoom () {
			this.$ctx.transformedPoint = (x, y) => {
				this.SVGPoint.x = x
				this.SVGPoint.y = y
				return this.SVGPoint.matrixTransform(this.SVGMatrix.inverse());
			}

			this.$ctx.getTransform = () => {
				return this.SVGMatrix
			}

			const savedTransforms = []
			let save = this.$ctx.save
			this.$ctx.save = () => {
				savedTransforms.push(this.SVGMatrix.translate(0, 0))
				return save.call(this.$ctx)
			}

			var restore = this.$ctx.restore
			this.$ctx.restore = () => {
				this.SVGMatrix = savedTransforms.pop()
				return restore.call(this.$ctx)
			}

			var scale = this.$ctx.scale
			this.$ctx.scale = (sx, sy) => {
				this.SVGMatrix = this.SVGMatrix.scaleNonUniform(sx, sy)
				return scale.call(this.$ctx, sx, sy)
			}

			var rotate = this.$ctx.rotate
			this.$ctx.rotate = (radians) => {
				this.SVGMatrix = this.SVGMatrix.rotate(radians * 180 / Math.PI)
				return rotate.call(this.$ctx, radians)
			}

			var translate = this.$ctx.translate
			this.$ctx.translate = (dx, dy) => {
				this.SVGMatrix = this.SVGMatrix.translate(dx, dy)
				return translate.call(this.$ctx, dx, dy)
			}

			var transform = this.$ctx.transform
			this.$ctx.transform = (a, b, c, d, e, f) => {
				var m2 = svg.createSVGMatrix()
					m2.a = a
					m2.b = b
					m2.c = c
					m2.d = d
					m2.e = e
					m2.f = f

				this.SVGMatrix = this.SVGMatrix.multiply(m2)
				return transform.call(this.$ctx, a, b, c, d, e, f)
			}

			var setTransform = this.$ctx.setTransform
			this.$ctx.setTransform = (a, b, c, d, e, f) => {
				this.SVGMatrix.a = a
				this.SVGMatrix.b = b
				this.SVGMatrix.c = c
				this.SVGMatrix.d = d
				this.SVGMatrix.e = e
				this.SVGMatrix.f = f
				return setTransform.call(this.$ctx, a, b, c, d, e, f)
			}
		},
		setup () {
			this.$canvas.width = `${this.$canvas.offsetWidth}`
			this.$canvas.height = `${this.$canvas.offsetHeight}`

			this.offsetX = this.$canvas.width / 2
			this.offsetY = this.$canvas.height / 2

			this.$refs.prediction.style.top = `-${this.tileSize}px`
			this.$refs.prediction.style.left = `-${this.tileSize}px`

			this.$refs.prediction.style.width = `${this.tileSize}px`
			this.$refs.prediction.style.height = `${this.tileSize}px`
			
			this.draw()
		},
		draw () {
			// Performance wise use this and just do a whole redraw when it is neccessary
			// this.$ctx.save()
			// this.$ctx.setTransform(1, 0, 0, 1, 0, 0)
			// this.$ctx.clearRect(0, 0, this.$canvas.width, this.$canvas.height)
			// this.$ctx.restore()

			// Clear
			const p1 = this.$ctx.transformedPoint(0, 0)
			const p2 = this.$ctx.transformedPoint(this.$canvas.width, this.$canvas.height)
			this.$ctx.clearRect(p1.x, p1.y, p2.x - p1.x, p2.y - p1.y)

			// Draw red blocks
			for (let i = this.STOREDBLOCKS.length - 1; i >= 0; i--) {
				let column = this.STOREDBLOCKS[i][0]
				let row = this.STOREDBLOCKS[i][1]
				let x = column * this.tileSize + this.offsetX
				let y = row * this.tileSize + this.offsetY

				this.$ctx.font = `${this.tileSize-this.gutter}px Arial`
				this.$ctx.fillText(this.infectedEmoji, x, y)
			}

			/*
			// Draw random red blocks
			for (let i = this.infections - 1; i >= 0; i--) {
				let position = this.getRandomUniquePosition(i)
				
				this.BLOCKS.push(`${position[0]}-${position[1]}`)

				//this.$ctx.font = `${this.tileSize-this.gutter}px Arial`
				//this.$ctx.fillText(this.infectedEmoji, position[0], position[1])
				this.$ctx.fillRect(position[0], position[1], this.tileSize, this.tileSize)
			}
			*/
			
			for (let j = this.STOREDEMOJIS.length - 1; j >= 0; j--) {
				let unicode = this.STOREDEMOJIS[j][0]
				let column = this.STOREDEMOJIS[j][1]
				let row = this.STOREDEMOJIS[j][2]

				let x = column * this.tileSize
				let y = row * this.tileSize

				console.log(row)

				this.$ctx.font = `${this.tileSize}px Arial`
				this.$ctx.fillText(unicode, x, y)
			}
		},
		zoom (clicks) {
			var pt = this.$ctx.transformedPoint(this.mouseX, this.mouseY)

			this.$ctx.translate(pt.x,pt.y)

			var factor = Math.pow(this.scaleFactor, clicks)

			this.$ctx.scale(factor, factor)
			this.$ctx.translate(-pt.x,-pt.y)

			this.draw()
		},
		selectEmoji (ev) {
			this.selectedEmoji = ev.target.innerHTML
			this.$refs.indicator.innerHTML = ev.target.innerHTML
		},
		addEmoji (column, row) {
			this.STOREDEMOJIS.push([this.selectedEmoji, column, row])

			this.selectedEmoji = null
			this.$refs.indicator.innerHTML = ''

			this.draw()
		},
		predictPosition (x, y) {
			x = Math.round(x / this.tileSize) * this.tileSize
			y = Math.round(y / this.tileSize) * this.tileSize

			this.$refs.prediction.style.left = `${y}px`
			this.$refs.prediction.style.top = `${x}px`
		},
		getUniqueNeighbourPosition (tileRadius, calls = 1) {
			// Cancel after pow of 10
			if (calls > 10) {
				return null
			}

			if (this.BLOCKS.includes(id)) {
				// Find empty neighbour
				return this.getUniqueNeighbourPosition(tileRadius, calls + 1)
			}
		},
		getRandomUniquePosition (i) {
			// Die erste Zelle ist 1/1 px. Von da an, kann Random ausgegangen werden
			// Dann werden beim Rendern alle Zellen mit einem Offset gesetzt, damit es mittig ist.
			let t = 1 - (i / this.infections)
			let rad = Math.random() * (Math.PI * 2)

			// it is wrong to use the radius of infections, because if we do a unique position it with be a rectangle
			// Do something without rely on radius. Just create a radius increasing by iteration e. g.
			let tileRadius = Math.pow(t, 4) * (this.infections * (this.tileSize / 100))

			let x = (tileRadius * Math.cos(rad)) + this.tileSize
			let y = (tileRadius * Math.sin(rad)) + this.tileSize

			x = Math.round(x / this.tileSize) * this.tileSize
			y = Math.round(y / this.tileSize) * this.tileSize

			let id = `${x}-${y}`

			/*
			// Performance issue: It 
			if (this.BLOCKS.includes(id)) {
				// Find empty neighbour
				return this.getUniqueNeighbourPosition(tileRadius)

				return this.getRandomUniquePosition(i)
			}
			*/

			return [x, y]
		}
	}
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style lang="scss">
html, body {
	width: 100vw;
	height: 100vh;
	overflow: hidden;
	//cursor: none;
}

#emojimap {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
}

#indicator {
	position: absolute;
	pointer-events: none;
	font-size: 32px;
	line-height: 0;
}

#prediction {
	position: absolute;
	pointer-events: none;
	border: 1px solid #0000ff;
	transform: translate(50%, -100%)
}

.tooltip {
	position: fixed;
	z-index: 999;
	background: #fff;
	border-radius: 20px;
	border: 2px solid #0000ff;
	width: 33.333333vw;
	margin: auto;
	padding: 2ch;
	font-weight: 700;
	text-align: center;

	button {
		border-radius: 12px;
		border: 2px solid #0000ff;
		padding: 2ch;
		width: 100%;
		font-size: 32px;
		line-height: 0;

		> span:hover {
			text-shadow: 0 0 12px rgba(#0000ff, 0.35);
		}
	}

	&.select-emoji {
		bottom: 12vh;
		left: 0;
		right: 0;
	}
}
</style>
